import { PipelineEvent } from 'src/types';

export const latestDate = new Date().toDateString();

export const pipelineWebhookFixture = {
  object_kind: 'pipeline',
  object_attributes: {
    id: 563913989,
    ref: 'main',
    tag: false,
    sha: 'c5b40d0e1885123eb93f1a6e5e3c84fe672288g1',
    before_sha: '7bd9e21235aa5e4e50d528c92173b8be5c40b01z',
    source: 'push',
    status: 'success',
    detailed_status: 'passed',
    stages: ['build', 'test', 'deploy'],
    created_at: '2022-06-14 22:45:56 UTC',
    finished_at: '2022-06-14 22:46:49 UTC',
    duration: 51,
    queued_duration: null as any,
    variables: [] as any[],
  },
  merge_request: null as any,
  user: {
    id: 10793434,
    name: 'Test User',
    username: 'tUser2',
    avatar_url: 'https://gitlab.com/uploads/-/system/user/avatar/1234/avatar.png',
    email: '[REDACTED]',
  },
  project: {
    id: 36867443,
    name: 'stringray',
    description:
      'Stingrays are a group of sea rays, which are cartilaginous fish related to sharks. They are classified in the suborder Myliobatoidei of the order Myliobatiformes and consist of eight families: Hexatrygonidae (sixgill stingray), Plesiobatidae (deepwat',
    web_url: 'https://gitlab.com/gitlab-com/test-group/stringray',
    avatar_url: null as any,
    git_ssh_url: 'git@gitlab.com:gitlab-com/test-group/stringray.git',
    git_http_url: 'https://gitlab.com/gitlab-com/test-group/stringray.git',
    namespace: 'test-group',
    visibility_level: 0,
    path_with_namespace: 'gitlab-com/test-group/stringray',
    default_branch: 'main',
    ci_config_path: '',
  },
  commit: {
    id: 'c5b40d0e1885276eb93f1a6e5e3c84fe672288f0',
    message: 'Update .gitlab-ci.yml file',
    title: 'Update .gitlab-ci.yml file',
    timestamp: '2022-06-14T22:45:54+00:00',
    url: 'https://gitlab.com/gitlab-com/alliances/test-group/stringray/-/commit/1234',
    author: { name: 'Test User', email: 'tuser2@example.com' },
  },
  builds: [
    {
      id: 2591053758,
      stage: 'build',
      name: 'build-job',
      status: 'success',
      created_at: '2022-06-14 22:45:56 UTC',
      started_at: '2022-06-14 22:45:56 UTC',
      finished_at: '2022-06-14 22:46:11 UTC',
      duration: 14.853819,
      queued_duration: 0.092718,
      when: 'on_success',
      manual: false,
      allow_failure: false,
      user: null,
      runner: null,
      artifacts_file: null,
      environment: null,
    },
    {
      id: 2591053759,
      stage: 'test',
      name: 'unit-test-job',
      status: 'success',
      created_at: '2022-06-14 22:45:56 UTC',
      started_at: '2022-06-14 22:46:12 UTC',
      finished_at: '2022-06-14 22:46:36 UTC',
      duration: 23.887026,
      queued_duration: 0.564249,
      when: 'on_success',
      manual: false,
      allow_failure: false,
      user: null,
      runner: null,
      artifacts_file: null,
      environment: null,
    },
    {
      id: 2591053761,
      stage: 'test',
      name: 'lint-test-job',
      status: 'success',
      created_at: '2022-06-14 22:45:56 UTC',
      started_at: '2022-06-14 22:46:12 UTC',
      finished_at: '2022-06-14 22:46:30 UTC',
      duration: 18.361969,
      queued_duration: 0.82745,
      when: 'on_success',
      manual: false,
      allow_failure: false,
      user: null,
      runner: null,
      artifacts_file: null,
      environment: null,
    },
    {
      id: 2591053762,
      stage: 'deploy',
      name: 'deploy-job',
      status: 'success',
      created_at: '2022-06-14 22:45:56 UTC',
      started_at: '2022-06-14 22:46:36 UTC',
      finished_at: latestDate,
      duration: 12.437945,
      queued_duration: 0.383398,
      when: 'on_success',
      manual: false,
      allow_failure: false,
      user: null,
      runner: null,
      artifacts_file: null,
      environment: {
        name: 'test production',
        action: 'start',
        deployment_tier: 'production',
      },
    },
  ],
} as PipelineEvent;
